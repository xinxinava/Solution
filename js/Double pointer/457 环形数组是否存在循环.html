<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //无向图找环
        var circularArrayLoop = function(nums) {
            let n = nums.length;
            let vis = new Array(n).fill(0);
            for (let start = 0, idx = 1; start < n; start++, idx++) {
                if (vis[start])
                    continue;
                let cur = start;
                let flag = nums[start] > 0;
                while (true) {
                    let next = ((cur + nums[cur]) % n + n) % n;
                    if (next == cur)
                        break;
                    if (vis[next]) {
                        if (vis[next] != idx)
                            break;
                        else return true;
                    }
                    if (flag && nums[next] < 0) break;
                    if (!flag && nums[next] > 0) break;
                    vis[next] = idx;
                    cur = next;
                }
            }
            return false;
        }
    </script>
</body>

</html>